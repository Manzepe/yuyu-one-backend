<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Yuyu One</title>

<style>
* { box-sizing: border-box; }

body{
  margin:0;
  background:#0f172a;
  font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}

.phone{
  width:390px;
  height:780px;
  background:white;
  border-radius:40px;
  overflow:hidden;
  display:flex;
  flex-direction:column;
  box-shadow:0 40px 80px rgba(0,0,0,.4);
}

.header{
  background:#0f172a;
  color:white;
  padding:18px;
  font-size:22px;
  font-weight:700;
}

.content{
  flex:1;
  overflow:auto;
  padding:20px;
}

.section-title{
  color:#64748b;
  font-size:14px;
  margin-bottom:12px;
}

.card{
  background:#f1f5f9;
  padding:16px;
  border-radius:14px;
  margin-bottom:12px;
  cursor:pointer;
  font-weight:600;
}

.card:hover{
  background:#e2e8f0;
}

.back{
  cursor:pointer;
  color:#0f172a;
  font-weight:600;
  margin-bottom:10px;
}

.title{
  font-size:26px;
  font-weight:700;
  margin-bottom:10px;
}

.desc{
  font-size:16px;
  margin-bottom:15px;
}

.footer{
  display:flex;
  border-top:1px solid #e5e7eb;
}

.tab{
  flex:1;
  text-align:center;
  padding:14px;
  font-weight:600;
}

.loading{
  text-align:center;
  padding:40px;
  color:#64748b;
}
</style>
</head>

<body>

<div class="phone">

  <div class="header">Yuyu One</div>

  <div class="content" id="contenido">
    <div class="loading">Cargando beneficios...</div>
  </div>

  <div class="footer">
    <div class="tab">Inicio</div>
    <div class="tab">Viajes</div>
    <div class="tab">Perfil</div>
  </div>

</div>

<script>

document.addEventListener("DOMContentLoaded", iniciarApp)

function iniciarApp(){
  cargarBeneficios()
}

function cargarBeneficios(){

  const cont = document.getElementById("contenido")
  cont.innerHTML = `<div class="loading">Cargando beneficios...</div>`

  fetch("/api/beneficios")
  .then(r => r.json())
  .then(lista => {

    cont.innerHTML = `
      <div class="section-title">Beneficios activos</div>
      <div id="lista"></div>
    `

    const listaDiv = document.getElementById("lista")

    lista.forEach(b=>{
      const card = document.createElement("div")
      card.className="card"
      card.textContent=b.nombre
      card.onclick=()=>verDetalle(b.nombre)
      listaDiv.appendChild(card)
    })

  })
  .catch(()=>{
    cont.innerHTML=`<div class="loading">Error conectando servidor</div>`
  })
}

function verDetalle(nombre){

  const cont = document.getElementById("contenido")

  const info = {

    "Seguro de Pantalla":{
      desc:"Protección inmediata contra daño accidental.",
      bullets:[
        "Reemplazo rápido",
        "Cobertura nacional",
        "Activación automática con membresía",
        "Sin trámites complicados"
      ]
    },

    "Descuentos Locales":{
      desc:"Ahorra en restaurantes, tiendas y servicios.",
      bullets:[
        "Hasta 40% de descuento",
        "Más de 500 comercios afiliados",
        "Ofertas exclusivas mensuales"
      ]
    },

    "Ahorro en Viajes":{
      desc:"Mejores precios en vuelos y hoteles.",
      bullets:[
        "Tarifas preferenciales",
        "Alertas inteligentes",
        "Reserva rápida en la app"
      ]
    }

  }

  const b = info[nombre]

  cont.innerHTML=`
    <div class="back" onclick="cargarBeneficios()">← Volver</div>
    <div class="title">${nombre}</div>
    <div class="desc">${b.desc}</div>
    <ul>
      ${b.bullets.map(x=>`<li>${x}</li>`).join("")}
    </ul>
  `
}

</script>

</body>
</html>
